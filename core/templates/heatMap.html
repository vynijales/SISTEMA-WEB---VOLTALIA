<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8' />
    <title>Mapa de calor com Mapbox GL JS</title>
    <meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
    <link href='https://api.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.css' rel='stylesheet' />
    <style>
      body {
        margin: 0;
        padding: 0;
      }

      #map {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 100%;
      }
    </style>
  </head>
  <body>
    <div id='map'></div>
    <script src='https://api.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.js'></script>
    <script>
      mapboxgl.accessToken = 'pk.eyJ1IjoidnluaWphbGVzIiwiYSI6ImNsZjh4YWo5bDBpaHMzcmtlZzM3MGJoZ2gifQ._Wm3t6w7QFppRKUvL6CXYA';

      var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/mapbox/streets-v11',
        center: [-0.09, 51.505],
        zoom: 13
      });

      map.on('load', function () {
        var coordinates = [
          [-0.09, 51.505],
          [-0.08, 51.505],
          [-0.1, 51.5],
          [-0.09, 51.5],
          [-0.08, 51.505],
          [-0.1, 51.505]
        ];

        // Adiciona o mapa de calor
        map.addLayer({
          id: 'heatmap',
          type: 'heatmap',
          source: {
            type: 'geojson',
            data: {
              type: 'FeatureCollection',
              features: coordinates.map(function (coordinate) {
                return {
                  type: 'Feature',
                  geometry: {
                    type: 'Point',
                    coordinates: coordinate
                  }
                };
              })
            }
          },
          paint: {
            'heatmap-radius': {
              stops: [
                [0, 10],
                [20, 50]
              ]
            },
            'heatmap-color': [
              'interpolate',
              ['linear'],
              ['heatmap-density'],
              0, 'rgba(0, 0, 255, 0)',
              0.2, 'rgb(0, 255, 0)',
              0.4, 'rgb(255, 255, 0)',
              0.6, 'rgb(255, 0, 0)',
              0.8, 'rgb(255, 0, 255)'
            ],
            'heatmap-opacity': 0.8
          }
        });

        // Adiciona o marcador
        new mapboxgl.Marker()
          .setLngLat([-0.09, 51.505])
          .addTo(map);
      });
    </script>
  </body>
</html>
